<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retail POS System - My Grocery Store</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2 class="store-name" id="sidebarStoreName">My Grocery Store</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-page="billing">
                    <span class="nav-icon">üõí</span>
                    <span class="nav-text">Billing/POS</span>
                </a>
                <a href="#" class="nav-item" data-page="inventory">
                    <span class="nav-icon">üì¶</span>
                    <span class="nav-text">Inventory</span>
                </a>
                <a href="#" class="nav-item" data-page="customers">
                    <span class="nav-icon">üë•</span>
                    <span class="nav-text">Customers</span>
                </a>
                <a href="#" class="nav-item" data-page="reports">
                    <span class="nav-icon">üìà</span>
                    <span class="nav-text">Reports</span>
                </a>
                <a href="#" class="nav-item" data-page="bills">
                    <span class="nav-icon">üßæ</span>
                    <span class="nav-text">Bills History</span>
                </a>
                <a href="#" class="nav-item" data-page="customer-ledger">
                    <span class="nav-icon">üìí</span>
                    <span class="nav-text">Customer Ledger</span>
                </a>
                <a href="#" class="nav-item" data-page="credit-management">
                    <span class="nav-icon">üí≥</span>
                    <span class="nav-text">Credit Management</span>
                </a>
                <a href="#" class="nav-item" data-page="ledger">
                    <span class="nav-icon">üí∞</span>
                    <span class="nav-text">Accounts &amp; Ledger</span>
                </a>
                <a href="#" class="nav-item" data-page="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Settings</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div class="page active" id="dashboard-page">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <div class="page-actions">
                        <button class="btn btn--secondary" onclick="refreshDashboard()">Refresh</button>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="stat-card" style="background: var(--color-bg-1)">
                        <div class="stat-label">Today's Sales</div>
                        <div class="stat-value" id="todaySales">‚Çπ0</div>
                        <div class="stat-change positive">+12.5%</div>
                    </div>
                    <div class="stat-card" style="background: var(--color-bg-2)">
                        <div class="stat-label">Total Products</div>
                        <div class="stat-value" id="totalProducts">0</div>
                        <div class="stat-change">In Stock</div>
                    </div>
                    <div class="stat-card" style="background: var(--color-bg-3)">
                        <div class="stat-label">Total Customers</div>
                        <div class="stat-value" id="totalCustomers">0</div>
                        <div class="stat-change">Active</div>
                    </div>
                    <div class="stat-card" style="background: var(--color-bg-4)">
                        <div class="stat-label">Low Stock Items</div>
                        <div class="stat-value" id="lowStockCount">0</div>
                        <div class="stat-change warning">Needs Attention</div>
                    </div>
                    <div class="stat-card" style="background: var(--color-bg-5)">
                        <div class="stat-label">Total Credit Outstanding</div>
                        <div class="stat-value" id="totalCreditOutstanding">‚Çπ0</div>
                        <div class="stat-change">Accounts Receivable</div>
                    </div>
                </div>

                <div class="dashboard-row">
                    <div class="card" style="flex: 2">
                        <div class="card__header">
                            <h3>Quick Actions</h3>
                        </div>
                        <div class="card__body">
                            <div class="quick-actions">
                                <button class="btn btn--primary" onclick="navigateToPage('billing')">üõí New Sale</button>
                                <button class="btn btn--secondary" onclick="navigateToPage('inventory')">üì¶ Add Product</button>
                                <button class="btn btn--secondary" onclick="navigateToPage('customers')">üë• Add Customer</button>
                                <button class="btn btn--secondary" onclick="navigateToPage('reports')">üìà View Reports</button>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="flex: 1">
                        <div class="card__header">
                            <h3>Low Stock Alerts</h3>
                        </div>
                        <div class="card__body">
                            <div id="lowStockList" class="alert-list"></div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card__header">
                        <h3>Recent Transactions</h3>
                    </div>
                    <div class="card__body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Invoice #</th>
                                        <th>Date &amp; Time</th>
                                        <th>Customer</th>
                                        <th>Items</th>
                                        <th>Amount</th>
                                        <th>Payment</th>
                                    </tr>
                                </thead>
                                <tbody id="recentTransactions"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Billing/POS Page -->
            <div class="page" id="billing-page">
                <div class="page-header">
                    <h1>Billing / Point of Sale</h1>
                    <div class="page-actions">
                        <button class="btn btn--secondary" onclick="clearBill()">Clear Bill</button>
                        <button class="btn btn--secondary" onclick="holdBill()">Hold</button>
                    </div>
                </div>

                <div class="billing-container">
                    <div class="billing-left">
                        <div class="search-section">
                            <input type="text" id="barcodeInput" class="form-control" placeholder="Scan barcode or search product..." onkeyup="handleBarcodeSearch(event)">
                            <button class="btn btn--primary" onclick="manualProductSearch()">Search</button>
                        </div>

                        <div class="category-filter">
                            <button class="category-btn active" data-category="all" onclick="filterByCategory('all')">All</button>
                            <button class="category-btn" data-category="Groceries" onclick="filterByCategory('Groceries')">Groceries</button>
                            <button class="category-btn" data-category="Pulses" onclick="filterByCategory('Pulses')">Pulses</button>
                            <button class="category-btn" data-category="Dairy" onclick="filterByCategory('Dairy')">Dairy</button>
                            <button class="category-btn" data-category="Vegetables" onclick="filterByCategory('Vegetables')">Vegetables</button>
                        </div>

                        <div class="product-grid" id="productGrid"></div>
                    </div>

                    <div class="billing-right">
                        <div class="bill-header">
                            <h3>Current Bill</h3>
                            <select class="form-control" id="customerSelect" onchange="selectCustomer()">
                                <option value="">Walk-in Customer</option>
                            </select>
                        </div>

                        <div class="bill-items" id="billItems"></div>

                        <div class="bill-summary">
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="billSubtotal">‚Çπ0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Tax (GST):</span>
                                <span id="billTax">‚Çπ0.00</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total:</span>
                                <span id="billTotal">‚Çπ0.00</span>
                            </div>
                        </div>

                        <div class="payment-section">
                            <label class="form-label">Payment Method</label>
                            <div class="payment-methods">
                                <button class="payment-btn active" data-method="cash" onclick="selectPaymentMethod('cash')">üíµ Cash</button>
                                <button class="payment-btn" data-method="card" onclick="selectPaymentMethod('card')">üí≥ Card</button>
                                <button class="payment-btn" data-method="upi" onclick="selectPaymentMethod('upi')">üì± UPI</button>
                                <button class="payment-btn" data-method="wallet" onclick="selectPaymentMethod('wallet')">üëõ Wallet</button>
                                <button class="payment-btn" data-method="credit" onclick="selectPaymentMethod('credit')">üí≥ Credit</button>
                            </div>
                            <div id="creditInfoDisplay" style="display: none; margin-top: 12px; padding: 12px; border-radius: 8px;"></div>
                        </div>

                        <button class="btn btn--primary btn--full-width btn--lg" onclick="completeSale()">Complete Sale</button>
                    </div>
                </div>
            </div>

            <!-- Inventory Page -->
            <div class="page" id="inventory-page">
                <div class="page-header">
                    <h1>Inventory Management</h1>
                    <div class="page-actions">
                        <button class="btn btn--primary" onclick="openAddProductModal()">+ Add Product</button>
                        <button class="btn btn--secondary" onclick="generateBarcodes()">Generate Barcodes</button>
                    </div>
                </div>

                <div class="inventory-filters">
                    <input type="text" id="inventorySearch" class="form-control" placeholder="Search products..." onkeyup="filterInventory()">
                    <select class="form-control" id="categoryFilter" onchange="filterInventory()">
                        <option value="">All Categories</option>
                    </select>
                    <select class="form-control" id="stockFilter" onchange="filterInventory()">
                        <option value="">All Stock Levels</option>
                        <option value="low">Low Stock</option>
                        <option value="out">Out of Stock</option>
                    </select>
                </div>

                <div class="card">
                    <div class="card__body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Product Name</th>
                                        <th>Category</th>
                                        <th>Barcode</th>
                                        <th>Price</th>
                                        <th>Stock</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="inventoryTable"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customers Page -->
            <div class="page" id="customers-page">
                <div class="page-header">
                    <h1>Customer Management</h1>
                    <div class="page-actions">
                        <button class="btn btn--primary" onclick="openAddCustomerModal()">+ Add Customer</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card__body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Phone</th>
                                        <th>Email</th>
                                        <th>Loyalty Points</th>
                                        <th>Total Purchases</th>
                                        <th>Last Visit</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="customersTable"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Page -->
            <div class="page" id="reports-page">
                <div class="page-header">
                    <h1>Reports &amp; Analytics</h1>
                    <div class="page-actions">
                        <button class="btn btn--secondary" onclick="printReport()">üñ®Ô∏è Print</button>
                    </div>
                </div>

                <div class="report-filters">
                    <select class="form-control" id="reportType" onchange="changeReportType()">
                        <option value="sales">Sales Report</option>
                        <option value="inventory">Inventory Report</option>
                        <option value="customer">Customer Report</option>
                        <option value="tax">Tax Report</option>
                        <option value="profit">Profit/Loss Report</option>
                    </select>
                    <input type="date" class="form-control" id="reportStartDate">
                    <input type="date" class="form-control" id="reportEndDate">
                    <button class="btn btn--primary" onclick="generateReport()">Generate Report</button>
                </div>

                <div class="card">
                    <div class="card__body">
                        <div id="reportContent"></div>
                    </div>
                </div>
            </div>

            <!-- Ledger Page -->
            <div class="page" id="ledger-page">
                <div class="page-header">
                    <h1>Accounts &amp; Ledger</h1>
                    <div class="page-actions">
                        <button class="btn btn--primary" onclick="openAddTransactionModal()">+ Add Transaction</button>
                    </div>
                </div>

                <div class="ledger-stats">
                    <div class="stat-card" style="background: var(--color-bg-3)">
                        <div class="stat-label">Total Revenue</div>
                        <div class="stat-value" id="totalRevenue">‚Çπ0</div>
                    </div>
                    <div class="stat-card" style="background: var(--color-bg-4)">
                        <div class="stat-label">Total Expenses</div>
                        <div class="stat-value" id="totalExpenses">‚Çπ0</div>
                    </div>
                    <div class="stat-card" style="background: var(--color-bg-1)">
                        <div class="stat-label">Net Profit</div>
                        <div class="stat-value" id="netProfit">‚Çπ0</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card__header">
                        <h3>Transaction Ledger</h3>
                    </div>
                    <div class="card__body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Description</th>
                                        <th>Type</th>
                                        <th>Category</th>
                                        <th>Amount</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody id="ledgerTable"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bills History Page -->
            <div class="page" id="bills-page">
                <div class="page-header">
                    <h1>Bills History</h1>
                    <div class="page-actions">
                        <input type="text" id="billSearch" class="form-control" placeholder="Search by bill # or customer..." onkeyup="filterBills()" style="width: 300px; margin-right: 12px;">
                        <button class="btn btn--secondary" onclick="filterBills()">Search</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card__body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Bill #</th>
                                        <th>Date &amp; Time</th>
                                        <th>Customer</th>
                                        <th>Items</th>
                                        <th>Total Amount</th>
                                        <th>Payment</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="billsTable"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customer Ledger Page -->
            <div class="page" id="customer-ledger-page">
                <div class="page-header">
                    <h1>Customer Ledger</h1>
                    <div class="page-actions">
                        <button class="btn btn--secondary" onclick="printCustomerLedger()">üñ®Ô∏è Print Ledger</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card__body">
                        <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                            <div class="form-group" style="flex: 1; margin-bottom: 0;">
                                <label class="form-label">Select Customer</label>
                                <select class="form-control" id="ledgerCustomerSelect" onchange="loadCustomerLedger()">
                                    <option value="">-- Select a Customer --</option>
                                </select>
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">From Date</label>
                                <input type="date" class="form-control" id="ledgerStartDate">
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">To Date</label>
                                <input type="date" class="form-control" id="ledgerEndDate">
                            </div>
                            <div class="form-group" style="margin-bottom: 0; align-self: flex-end;">
                                <button class="btn btn--primary" onclick="loadCustomerLedger()">Load Ledger</button>
                            </div>
                        </div>

                        <div id="customerLedgerContent">
                            <p style="text-align: center; color: var(--color-text-secondary); padding: 40px;">Please select a customer to view their ledger</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Credit Management Page -->
            <div class="page" id="credit-management-page">
                <div class="page-header">
                    <h1>Credit Management</h1>
                    <div class="page-actions">
                        <button class="btn btn--secondary" onclick="generateCreditReport()">üìä Generate Report</button>
                    </div>
                </div>

                <div class="credit-summary">
                    <div class="stat-card" style="background: var(--color-bg-1)">
                        <div class="stat-label">Total Credit Extended</div>
                        <div class="stat-value" id="totalCreditExtended">‚Çπ0</div>
                    </div>
                    <div class="stat-card" style="background: var(--color-bg-4)">
                        <div class="stat-label">Total Outstanding</div>
                        <div class="stat-value" id="totalOutstanding">‚Çπ0</div>
                    </div>
                    <div class="stat-card" style="background: var(--color-bg-3)">
                        <div class="stat-label">Customers on Credit</div>
                        <div class="stat-value" id="customersOnCredit">0</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card__header">
                        <h3>Customers with Outstanding Credit</h3>
                    </div>
                    <div class="card__body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Customer Name</th>
                                        <th>Phone</th>
                                        <th>Outstanding Balance</th>
                                        <th>Credit Limit</th>
                                        <th>Available Credit</th>
                                        <th>Last Payment</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="creditManagementTable"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page" id="settings-page">
                <div class="page-header">
                    <h1>Settings</h1>
                    <div class="page-actions">
                        <button class="btn btn--primary" onclick="saveSettings()">Save Settings</button>
                    </div>
                </div>

                <div class="settings-grid">
                    <div class="card">
                        <div class="card__header">
                            <h3>Store Information</h3>
                        </div>
                        <div class="card__body">
                            <div class="form-group">
                                <label class="form-label">Store Name</label>
                                <input type="text" class="form-control" id="storeName" placeholder="Enter store name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Store Address</label>
                                <textarea class="form-control" id="storeAddress" rows="3" placeholder="Enter store address"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="storePhone" placeholder="Enter phone number">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" id="storeEmail" placeholder="Enter email">
                            </div>
                            <div class="form-group">
                                <label class="form-label">GST Number</label>
                                <input type="text" class="form-control" id="storeGST" placeholder="Enter GST number">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Owner Name</label>
                                <input type="text" class="form-control" id="storeOwner" placeholder="Enter owner name">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>Tax Configuration</h3>
                        </div>
                        <div class="card__body">
                            <div class="form-group">
                                <label class="form-label">GST Calculation Mode</label>
                                <select class="form-control" id="gstMode">
                                    <option value="exclusive">GST Exclusive - Base price shown, GST added on top at billing</option>
                                    <option value="inclusive">GST Inclusive - Total price includes GST</option>
                                </select>
                                <small style="color: var(--color-text-secondary); margin-top: 8px; display: block;">
                                    <strong>Exclusive:</strong> If base price is ‚Çπ100 with 5% GST, customer pays ‚Çπ105<br>
                                    <strong>Inclusive:</strong> If price is ‚Çπ105 with 5% GST, base is ‚Çπ100 and GST is ‚Çπ5
                                </small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Default Tax Rate (%)</label>
                                <input type="number" class="form-control" id="defaultTaxRate" placeholder="5" step="0.01">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>Category Management</h3>
                        </div>
                        <div class="card__body">
                            <button class="btn btn--primary" onclick="openCategoryModal()" style="margin-bottom: 16px;">+ Add Category</button>
                            <div id="categoriesList"></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>System Preferences</h3>
                        </div>
                        <div class="card__body">
                            <div class="form-group">
                                <label class="form-label">Currency Symbol</label>
                                <input type="text" class="form-control" id="currencySymbol" value="‚Çπ">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Receipt Footer Text</label>
                                <textarea class="form-control" id="receiptFooter" rows="2" placeholder="Thank you for shopping with us!"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Add Product</h3>
                <button class="modal-close" onclick="closeModal('productModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Product Name</label>
                    <input type="text" class="form-control" id="productName">
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-control" id="productCategory"></select>
                </div>
                <div class="form-group">
                    <label class="form-label">Barcode (Optional)</label>
                    <input type="text" class="form-control" id="productBarcode">
                </div>
                <div class="form-group">
                    <label class="form-label">Price (‚Çπ)</label>
                    <input type="number" class="form-control" id="productPrice" step="0.01">
                </div>
                <div class="form-group">
                    <label class="form-label">Cost (‚Çπ)</label>
                    <input type="number" class="form-control" id="productCost" step="0.01">
                </div>
                <div class="form-group">
                    <label class="form-label">Stock Quantity</label>
                    <input type="number" class="form-control" id="productStock" step="0.1">
                </div>
                <div class="form-group">
                    <label class="form-label">Unit</label>
                    <input type="text" class="form-control" id="productUnit" placeholder="kg, packet, liter, etc.">
                </div>
                <div class="form-group">
                    <label class="form-label">Tax Rate (%)</label>
                    <input type="number" class="form-control" id="productTaxRate" step="0.01" value="5">
                </div>
                <div class="form-group">
                    <label class="form-label">Reorder Level</label>
                    <input type="number" class="form-control" id="productReorderLevel" value="10">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('productModal')">Cancel</button>
                <button class="btn btn--primary" onclick="saveProduct()">Save Product</button>
            </div>
        </div>
    </div>

    <div class="modal" id="customerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="customerModalTitle">Add Customer</h3>
                <button class="modal-close" onclick="closeModal('customerModal')">&times;</button>
            </div>
            <div class="modal-body">
    <div class="form-group">
        <label class="form-label">Customer Name</label>
        <input type="text" class="form-control" id="customerName">
    </div>
    <div class="form-group">
        <label class="form-label">Phone Number</label>
        <input type="tel" class="form-control" id="customerPhone">
    </div>
    <div class="form-group">
        <label class="form-label">Email</label>
        <input type="email" class="form-control" id="customerEmail">
    </div>
    <div class="form-group">
        <label class="form-label">Address</label>
        <textarea class="form-control" id="customerAddress" rows="3"></textarea>
    </div>
    <div class="form-group">
        <label class="form-label">Loyalty Points</label>
        <input type="number" class="form-control" id="customerLoyaltyPoints" value="0">
    </div>
    <div class="form-group">
        <label class="form-label">Credit Limit (‚Çπ)</label>
        <input type="number" class="form-control" id="customerCreditLimit" value="0" step="0.01">
    </div>
</div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('customerModal')">Cancel</button>
                <button class="btn btn--primary" onclick="saveCustomer()">Save Customer</button>
            </div>
        </div>
    </div>

    <div class="modal" id="billDetailsModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3>Bill Details</h3>
                <button class="modal-close" onclick="closeModal('billDetailsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="billDetailsContent"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('billDetailsModal')">Close</button>
                <button class="btn btn--secondary" onclick="printBillFromModal()">üñ®Ô∏è Print</button>
            </div>
        </div>
    </div>

    <div class="modal" id="editBillModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>Edit Bill</h3>
                <button class="modal-close" onclick="closeModal('editBillModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="editBillInfo" style="padding: 12px; background: var(--color-bg-1); border-radius: 8px; margin-bottom: 16px;"></div>
                <div id="editBillItems"></div>
                <div style="margin-top: 16px; padding: 16px; background: var(--color-bg-2); border-radius: 8px;">
                    <h4 style="margin-bottom: 12px;">Add New Item</h4>
                    <div style="display: flex; gap: 12px;">
                        <select class="form-control" id="editBillProductSelect" style="flex: 1;">
                            <option value="">-- Select Product --</option>
                        </select>
                        <button class="btn btn--primary" onclick="addItemToEditBill()">Add Item</button>
                    </div>
                </div>
                <div id="editBillSummary" style="margin-top: 16px; padding: 16px; background: var(--color-bg-3); border-radius: 8px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('editBillModal')">Cancel</button>
                <button class="btn btn--primary" onclick="saveEditedBill()">Save Changes</button>
            </div>
        </div>
    </div>

    <div class="modal" id="stockAdjustmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Adjust Stock</h3>
                <button class="modal-close" onclick="closeModal('stockAdjustmentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="adjustmentProductInfo" style="padding: 12px; background: var(--color-bg-1); border-radius: 8px; margin-bottom: 16px;"></div>
                <div class="form-group">
                    <label class="form-label">Adjustment Type</label>
                    <select class="form-control" id="adjustmentType">
                        <option value="add">Add Stock (Purchase/Received)</option>
                        <option value="remove">Remove Stock (Damage/Wastage/Return)</option>
                        <option value="set">Set Stock (Manual Count)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Quantity</label>
                    <input type="number" class="form-control" id="adjustmentQuantity" step="0.1" placeholder="Enter quantity">
                </div>
                <div class="form-group">
                    <label class="form-label">Reason/Remarks</label>
                    <textarea class="form-control" id="adjustmentReason" rows="3" placeholder="Enter reason for adjustment"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('stockAdjustmentModal')">Cancel</button>
                <button class="btn btn--primary" onclick="saveStockAdjustment()">Save Adjustment</button>
            </div>
        </div>
    </div>

    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="categoryModalTitle">Add Category</h3>
                <button class="modal-close" onclick="closeModal('categoryModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Category Name</label>
                    <input type="text" class="form-control" id="categoryName" placeholder="Enter category name">
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-control" id="categoryDescription" rows="2" placeholder="Enter category description"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('categoryModal')">Cancel</button>
                <button class="btn btn--primary" onclick="saveCategory()">Save Category</button>
            </div>
        </div>
    </div>

    <div class="modal" id="barcodeModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>Barcode Generator &amp; Printer</h3>
                <button class="modal-close" onclick="closeModal('barcodeModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Select Products for Barcode Generation</label>
                    <div id="barcodeProductList" style="max-height: 300px; overflow-y: auto; border: 1px solid var(--color-border); border-radius: 8px; padding: 12px;"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Label Size</label>
                    <select class="form-control" id="labelSize">
                        <option value="small">Small (40x25mm)</option>
                        <option value="medium" selected>Medium (50x30mm)</option>
                        <option value="large">Large (70x40mm)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Copies per Product</label>
                    <input type="number" class="form-control" id="barcodeCopies" value="1" min="1" max="100">
                </div>
                <div id="barcodePreview" style="margin-top: 20px; padding: 16px; background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 8px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('barcodeModal')">Cancel</button>
                <button class="btn btn--secondary" onclick="generateBarcodePreview()">Preview</button>
                <button class="btn btn--primary" onclick="printBarcodes()">üñ®Ô∏è Print Barcodes</button>
            </div>
        </div>
    </div>

    <div class="modal" id="receiptModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Receipt</h3>
                <button class="modal-close" onclick="closeModal('receiptModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="receiptContent" class="receipt"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('receiptModal')">Close</button>
                <button class="btn btn--primary" onclick="printReceipt()">üñ®Ô∏è Print Receipt</button>
            </div>
        </div>
    </div>

    <div class="modal" id="receivePaymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Receive Payment</h3>
                <button class="modal-close" onclick="closeModal('receivePaymentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="paymentCustomerInfo" style="padding: 12px; background: var(--color-bg-1); border-radius: 8px; margin-bottom: 16px;"></div>
                <div class="form-group">
                    <label class="form-label">Payment Amount (‚Çπ)</label>
                    <input type="number" class="form-control" id="paymentAmount" step="0.01" placeholder="Enter amount">
                </div>
                <div class="form-group">
                    <label class="form-label">Payment Method</label>
                    <select class="form-control" id="paymentMethodSelect">
                        <option value="Cash">Cash</option>
                        <option value="Card">Card</option>
                        <option value="UPI">UPI</option>
                        <option value="Digital Wallet">Digital Wallet</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Remarks (Optional)</label>
                    <textarea class="form-control" id="paymentRemarks" rows="2" placeholder="Enter remarks"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('receivePaymentModal')">Cancel</button>
                <button class="btn btn--primary" onclick="savePayment()">Receive Payment</button>
            </div>
        </div>
    </div>

    <div class="modal" id="customerDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Customer Details</h3>
                <button class="modal-close" onclick="closeModal('customerDetailsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="customerDetailsContent"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="closeModal('customerDetailsModal')">Close</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>